!function(a){a.fn.UixPBFormPop=function(b){var c=a.extend({postID:"",title:"",trigger:"",errorInfo:"Timeout expired. The timeout period elapsed prior to completion of the operation or the server is not responding. ",initFunction:function(){},startFunction:function(){}},b);this.each(function(){function l(b){a(".uixpbform-modal-box").each(function(){var c=b,d=c.find('[name="section"]').val(),e=c.find('[name="row"]').val(),f=c.find('[name="colid"]').val(),g=[],h=[];if(void 0!==f){var i=f.split("---"),j=i[0].replace("col-item-",""),k=a("[name^='"+d+"|["+f+"]']"),l=k.serializeArray();g.push(["col",j]),h.push(["section",d]),h.push(["row",e]),h.push(["widgetname","Section "+e]),a.each(l,function(b,c){var d=c.value,e=c.name;d=uixpbform_htmlEscape(d);var f=a('[name="'+e+'"]');if(f.is("textarea")){var h=uixpbform_format_textarea(f,!1,d);""!=h&&(d=h)}g.push([e,d])});var m=JSON.stringify(g);uixpbform_insertCodes(d,m,f,e);(new UixPBGridsterMain).itemSave(e),h.push(["rowcontent","{allcontent}"]);var o=JSON.stringify(h);uixpbform_insertCodes(d,o,"cols-all-content-replace-"+e,e)}})}var d=(a(this),c.trigger.replace(".","").replace("#","")),e=c.title,f=c.postID,g=c.trigger,h=c.errorInfo,i="uixpbform-modal-open-"+d,j=g.replace(".","").replace("#",""),k={formID:j,title:e,thisModalID:i,thisFormName:d};a(".uixpbform-modal-mask").length<1&&a("body").prepend('<div class="uixpbform-modal-mask"></div>'),a("#"+k.thisModalID).length<1&&a("body").prepend('<div class="uixpbform-modal-box" id="'+k.thisModalID+'"><a href="javascript:void(0)" class="close-btn close-uixpbform-modal">&times;</a><div class="content"><h2>'+k.title+'</h2><span class="iconslist-box"></span><span class="ajax-temp"></span></div></div>'),"[object Function]"==Object.prototype.toString.call(c.initFunction)&&c.initFunction(k),a(document).on("click",g,function(b){b.preventDefault();var d=a(this).data("id"),g=a(this).data("name"),k=a(this).data("col-textareaid"),l={formID:j,ID:d,contentID:"content-data-"+d,title:e,name:g,thisModalID:i,sectionID:d,colID:k},n=a(".uixpbform-modal-box#"+i),o=a(".uixpbform-modal-box"),p=a(".uixpbform-modal-buttons"),q=.8*a(window).height()-150;a(this).parent(".uix-page-builder-col").length,n.length>0&&(a.ajax({url:ajaxurl,type:"POST",data:{action:"uixpbform_ajax_modules",tempID:j,sectionID:d,colID:k,widgetName:g,postID:f},success:function(b){b=b.replace(/{index}/g,"["+d+"]"),n.find(".ajax-temp").html(b),0==n.find(".iconslist-box").html().length&&n.find(".iconslist-box").html(a(".uixpbform-icon-selector-btn-target").html()),n.find(".uixpbform-mce-editor").each(function(){uixpbform_editorInit(a(this).find("textarea.mce").attr("id"))});var c=0,e=0,f=n.find(".ajax-temp .uixpbform-form-container"),g=n.find(".ajax-temp .uixpbform-table-cols-wrapper"),h=Array();if(g.length>0){g.each(function(b){var c=a(this).height();a(this).hasClass("uixpbform-table-col-1")&&(e=c),h.push(parseFloat(c)+parseFloat(e))});for(var j=-1/0,k=0;k<h.length;k++)h[k]>j&&(c=h[k])}else c=f.height();return(null==c||0==c||parseFloat(c+150+.2*a(window).height())>a(window).height())&&(c=q),o.css("height",parseFloat(c+150)+"px"),n.find(".ajax-temp .uixpbform-modal-buttons").css("margin-top",parseFloat(c/2+20)+"px"),a(".uixpbform_btn_trigger-clone").on("click",function(a){a.preventDefault(),o.css("height",parseFloat(q+150)+"px"),n.find(".ajax-temp .uixpbform-modal-buttons").css("margin-top",parseFloat(q/2+20)+"px")}),a(".uixpbform-icon-selector").uixpbform_iconSelector(),a(".wp-color-input").wpColorPicker(),a(".uixpbform_btn_trigger-toggleshow").each(function(){1==a(this).closest(".uixpbform-box").find("input").val()&&a(this).uixpbform_toggleshow()}),a(".uixpbform_btn_trigger-toggleswitch_checkbox").uixpbform_toggleSwitchCheckboxStatus(),a(".uixpbform_btn_trigger-toggleswitch_radio").uixpbform_toggleSwitchRadioStatus(),a(".uixpbform_btn_trigger-upload").uixpbform_mediaStatus(),a(".uixpbform-modal-box .close-uixpbform-modal").on("click",function(b){b.preventDefault(),a(document).UixPBFormPopClose(),a(".uixpbform-modal-box .iconslist-box").removeAttr("id").removeClass("active"),a(".uixpbform-modal-box .ajax-temp").css("visibility","visible")}),!1},error:function(){n.find(".ajax-temp").html(h)},beforeSend:function(){n.find(".ajax-temp").html('<span class="uixpbform-loading"></span>'),o.css("height","220px"),p.css("margin-top","50px")}}),n.UixPBFormPopWinReset({heightChange:!1})),"[object Function]"==Object.prototype.toString.call(c.startFunction)&&c.startFunction(l),a(".uixpbform-modal-box .close-uixpbform-modal").on("click",function(b){b.preventDefault(),a(this).parent().removeClass("active"),a(document).UixPBFormPopClose(),a(".uixpbform-modal-box .iconslist-box").removeAttr("id").removeClass("active"),a(".uixpbform-modal-box .ajax-temp").css("visibility","visible")})}),a(document).on("click",".uixpbform-modal-save-btn",function(b){try{b.preventDefault();var c=a(this).closest("form"),d=a(this).closest(".uixpbform-modal-box.active").attr("id");if(1==a("#"+d).find(".uixpbform-modal-save-btn").length){l(c);a("[name='uix-page-builder-layoutdata']").val().indexOf('"content":""')>=0&&setTimeout(function(){l(c)},15)}a(document).UixPBFormPopClose()}catch(a){console.log(a.message)}})})}}(jQuery),function(a){a.fn.UixPBFormPopClose=function(b){a.extend({},b);this.each(function(){a(".uixpbform-modal-box").removeClass("active"),a("html").css("overflow-y","auto"),a(".uixpbform-modal-mask").fadeOut("fast")})}}(jQuery),function(a){a.fn.UixPBFormPopSwitchTransition=function(b){a.extend({},b);this.each(function(){a(".uixpbform-modal-box").removeClass("active"),a("html").css("overflow-y","auto")})}}(jQuery),function(a){a.fn.UixPBFormPopWinReset=function(b){var c=a.extend({heightChange:!0},b);this.each(function(){var b=a(this);b.addClass("active"),a(".uixpbform-modal-mask").fadeIn("fast"),c.heightChange&&b.css("height",parseFloat(.8*a(window).height()-150+150)+"px"),b.find(".content").animate({scrollTop:10},100),a("html").css("overflow-y","hidden")})}}(jQuery);